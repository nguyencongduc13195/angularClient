<div class="container" *ngIf="loaded" #scroll>
	<div class="row">
		<h5 class="name">{{productDetail?.name}}</h5>
		<div class="col-xs-offset-1 col-xs-4">
			<!-- <img *ngIf="productDetail?.image !==''; else none" 
				src="https://apimean.herokuapp.com/api/product/img/{{productDetail?.image}}" class="img-responsive"> -->
			<img *ngIf="productDetail?.image !==''; else none" 
				src="http://localhost:3000/api/product/img/{{productDetail?.image}}" class="img-responsive">
			<ng-template #none>
				<!-- <img class="img-responsive" src="https://apimean.herokuapp.com/api/product/img/no-image.jpg"/> -->
				<img class="img-responsive" src="http://localhost:3000/api/product/img/no-image.jpg"/>
			</ng-template>
			<br>
			<div class="text-center">
				<span class="dropdown">
					<button type="button" class="btn btn-success btn-lg" 
						(click)="likeProduct(productDetail?._id)"
						[disabled]="isLiked"
					>
					{{likes}}&nbsp;<i class="glyphicon glyphicon-thumbs-up"></i>
					</button>
					<span class="dropdown-content">
						<a *ngFor="let name of likeBy">{{name}}</a>
					</span>
				</span>
				<span class="dropdown">
					<button type="button" class="btn btn-danger btn-lg"
						(click)="dislikeProduct(productDetail?._id)"
						[disabled]="isDisliked"
					>
						{{dislikes}}&nbsp;<i class="glyphicon glyphicon-thumbs-down"></i>
					</button>
					<span class="dropdown-content">
						<a *ngFor="let name of dislikeBy">{{name}}</a>
					</span>
				</span>
				<button type="button" class="btn btn-primary btn-lg">
					{{productDetail?.view_count}}&nbsp;Lượt xem
				</button>
			</div>
		</div>
		<div class="col-xs-7">
			<div *ngIf="productDetail?.promotion_price !== productDetail?.price; else nosale">
				<h4>
					<del>
						{{productDetail?.price| currency:'VND':'symbol':'1.0-3'}}
					</del>
				</h4>
				<h4><strong>{{productDetail?.promotion_price| currency:'VND':'symbol':'1.0-3'}}</strong></h4>
			</div>
			<ng-template #nosale>
				<h4><strong>{{productDetail?.price | currency:'VND':'symbol':'1.0-3' }}</strong></h4>
			</ng-template>
			<!-- <button class="btn"><i class="glyphicon glyphicon-minus"></i></button> -->
			<strong>Số lượng:</strong> <input type="number" min="1" #quantity value="1" class="text-center">
			<!-- <button class="btn"><i class="glyphicon glyphicon-plus"></i></button> -->
			<br><br>
			<button *ngIf="productDetail?.stockitems" type="button" class="btn btn-success btn-lg" 
				(click)="addToCart(productDetail, quantity.value)">
				Thêm vào giỏ hàng</button>
			<button *ngIf="!productDetail?.stockitems" type="button" class="btn btn-danger btn-lg">
				Sản phẩm đã hết
			</button>
		</div>
	</div>
	<div class="row text-center" style="margin-top: 30px;">
		<div class="col-md-offset-4 col-xs-6 col-sm-6 col-md-3 choice" 
			[class.active]="isChoice===1"
			(click)="isChoice = 1"
			>
			Chi tiết sản phẩm
		</div>
		<div class="col-xs-6 col-sm-6 col-md-3 choice" 
			[class.active]="isChoice===2"
			(click)="isChoice = 2"
			>
			Bình luận sản phẩm
		</div>
	</div>
	<hr>
	<div class="row">
		<div [innerHTML]="productDetail?.body" 
			class="col-xs-offset-1 col-xs-10" 
			*ngIf="isChoice===1">
		</div>
		<div class="col-xs-offset-1 col-xs-10" *ngIf="isChoice===2">
			<div class="row">
				<div class="col-xs-9 col-sm-9 col-md-9 col-lg-9">
					<h3>Đóng góp ý kiến</h3>
					<div class="row">
						<form [formGroup]="formComment" (ngSubmit)="onPostComment(formComment.value)">
							<div class="col-xs-12 col-sm-6 col-md-6 col-lg-6">
								<div class="row">
									<div class="col-xs-12">
										<div class="form-group">
											<input 
												[(ngModel)]="txtComment"
												formControlName="txtComment"
												name="txtComment"
												type="text" 
												class="form-control" 
												placeholder="Vui lòng nhập ý kiến"
												autocomplete="off" 
											>
										</div>
									</div>
									<div class="col-xs-12 rate">
										<app-rating [rated]="rates" (rating)="getRating($event)"></app-rating>
									</div>
									<div class="col-xs-6 col-sm-6 col-md-6 col-lg-6">
										<button 
										[disabled]="formComment.invalid"
										type="submit" 
										class="btn btn-primary btn-lg">Gửi</button>
									</div>
								</div>
							</div>
							<div class="col-xs-6 col-sm-6 col-md-6 col-lg-6">
								<span>5 sao</span><div class="a five">a</div> {{fiveStar}}<br>
								<span>4 sao</span><div class="a four">a</div> {{fourStar}}<br>
								<span>3 sao</span><div class="a three">a</div> {{threeStar}}<br>
								<span>2 sao</span><div class="a two">a</div> {{twoStar}}<br>
								<span>1 sao</span><div class="a one">a</div> {{oneStar}}<br>
								<span>0 sao</span><div class="a zero">a</div> {{zeroStar}}<br>
							</div>
						</form>
					</div>
				</div>
				<hr>
				<div class="col-xs-6 col-sm-6 col-md-6 col-lg-6" *ngFor="let item of reviews">
					<div class="thumbnail">
						<div class="caption">
							<div class="pull-left">
								<h3>{{item?.full_name}}</h3>
								<h4>{{item?.created_at | date:'dd/MM/yyyy'}}</h4>
							</div>
							<h3 class="pull-right">
								{{item?.rating}}&nbsp;<strong><i class="glyphicon glyphicon-star"></i></strong></h3>
							<div class="clearfix"></div>
							<p>{{item?.comment}}</p>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
	<br>
	<div class="row">
		<app-related-product (view)="getData($event)"></app-related-product>
		<app-diffirent-product></app-diffirent-product>
	</div>
</div>